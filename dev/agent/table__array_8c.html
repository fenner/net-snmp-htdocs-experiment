---
section: development
---
<!-- CONTENT START -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>table_array.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; </center>
<hr><h1>table_array.c File Reference</h1><code>#include &lt;<a class="el" href="config_8h-source.html">config.h</a>&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;assert.h&gt;</code><br>
<code>#include "mibincl.h"</code><br>
<code>#include "tools.h"</code><br>
<code>#include "<a class="el" href="snmp__agent_8h-source.html">snmp_agent.h</a>"</code><br>
<code>#include "<a class="el" href="table_8h-source.html">table.h</a>"</code><br>
<code>#include "oid_array.h"</code><br>
<code>#include "<a class="el" href="table__array_8h-source.html">table_array.h</a>"</code><br>
<code>#include &lt;dmalloc.h&gt;</code><br>

<p>
<a href="table__array_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Data Structures</h2></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><a class="el" href="structset__context__s.html">set_context_s</a></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><a class="el" href="structtable__array__data__s.html">table_array_data_s</a></td></tr>
<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td nowrap align=right valign=top>typedef <a class="el" href="structtable__array__data__s.html">table_array_data_s</a>&nbsp;</td><td valign=bottom><a class="el" href="table__array_8c.html#a1">table_array_data</a></td></tr>
<tr><td nowrap align=right valign=top>typedef <a class="el" href="structset__context__s.html">set_context_s</a>&nbsp;</td><td valign=bottom><a class="el" href="table__array_8c.html#a2">set_context</a></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="table__array_8c.html#a3">register_table_array</a> (<a class="el" href="helpers_2agent__handler_8h.html#a9">handler_registration</a> *reginfo, <a class="el" href="table_8h.html#a11">table_registration_info</a> *tabreg, <a class="el" href="table__array_8h.html#a4">table_array_callbacks</a> *cb, int group_rows)</td></tr>
<tr><td nowrap align=right valign=top>oid_array *&nbsp;</td><td valign=bottom><a class="el" href="table__array_8c.html#a4">extract_array_context</a> (<a class="el" href="snmp__agent_8h.html#a18">request_info</a> *request)</td></tr>
<tr><td nowrap align=right valign=top>const oid_array_header *&nbsp;</td><td valign=bottom><a class="el" href="table__array_8c.html#a5">table_array_get_by_index</a> (<a class="el" href="helpers_2agent__handler_8h.html#a9">handler_registration</a> *reginfo, oid_array_header *hdr)</td></tr>
<tr><td nowrap align=right valign=top>oid_array_header *&nbsp;</td><td valign=bottom><a class="el" href="table__array_8c.html#a8">find_next_row</a> (<a class="el" href="table_8h.html#a12">table_request_info</a> *tblreq_info, <a class="el" href="table__array_8c.html#a1">table_array_data</a> *tad)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="table__array_8c.html#a9">build_new_oid</a> (<a class="el" href="helpers_2agent__handler_8h.html#a9">handler_registration</a> *reginfo, <a class="el" href="table_8h.html#a12">table_request_info</a> *tblreq_info, oid_array_header *row, <a class="el" href="snmp__agent_8h.html#a18">request_info</a> *current)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="table__array_8c.html#a10">process_get_requests</a> (<a class="el" href="helpers_2agent__handler_8h.html#a9">handler_registration</a> *reginfo, <a class="el" href="snmp__agent_8h.html#a21">agent_request_info</a> *agtreq_info, <a class="el" href="snmp__agent_8h.html#a18">request_info</a> *requests, <a class="el" href="table__array_8c.html#a1">table_array_data</a> *tad)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>table.entry.column.index.</em> <a href="#a10">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="table__array_8c.html#a11">group_requests</a> (<a class="el" href="snmp__agent_8h.html#a21">agent_request_info</a> *agtreq_info, <a class="el" href="snmp__agent_8h.html#a18">request_info</a> *requests, oid_array array_group_tbl, <a class="el" href="table__array_8c.html#a1">table_array_data</a> *tad)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>for ( ...</em> <a href="#a11">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="table__array_8c.html#a12">process_set_group</a> (oid_array_header *o, void *c)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>for( current ...</em> <a href="#a12">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="table__array_8c.html#a13">process_set_requests</a> (<a class="el" href="snmp__agent_8h.html#a21">agent_request_info</a> *agtreq_info, <a class="el" href="snmp__agent_8h.html#a18">request_info</a> *requests, <a class="el" href="table__array_8c.html#a1">table_array_data</a> *tad, char *handler_name)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>context-&gt;status = SNMP_ERR_GENERR.</em> <a href="#a13">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="table__array_8c.html#a14">table_array_helper_handler</a> (<a class="el" href="helpers_2agent__handler_8h.html#a8">mib_handler</a> *handler, <a class="el" href="helpers_2agent__handler_8h.html#a9">handler_registration</a> *reginfo, <a class="el" href="snmp__agent_8h.html#a21">agent_request_info</a> *agtreq_info, <a class="el" href="snmp__agent_8h.html#a18">request_info</a> *requests)</td></tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a name="a2" doxytag="table_array.c::set_context"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="structset__context__s.html">set_context_s</a>  set_context
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="table_array.c::table_array_data"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="structtable__array__data__s.html">table_array_data_s</a>  table_array_data
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a9" doxytag="table_array.c::build_new_oid"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void build_new_oid </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="helpers_2agent__handler_8h.html#a9">handler_registration</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>reginfo</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="table_8h.html#a12">table_request_info</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>tblreq_info</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>oid_array_header *&nbsp;</td>
          <td class="mdname">&nbsp; <em>row</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="snmp__agent_8h.html#a18">request_info</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>current</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="table__array_8c-source.html#l00208">208</a> of file <a class="el" href="table__array_8c-source.html">table_array.c</a>.
<p>
Referenced by <a class="el" href="table__array_8c-source.html#l00243">process_get_requests</a>().
<p>
<div class="fragment"><pre>00212 {
00213     oid coloid[MAX_OID_LEN];
00214     <font class="keywordtype">int</font> coloid_len;        
00215 
00216     coloid_len = reginfo-&gt;<a class="code" href="structhandler__registration__s.html#m3">rootoid_len</a>+2;
00217     memcpy(coloid, reginfo-&gt;<a class="code" href="structhandler__registration__s.html#m2">rootoid</a>, reginfo-&gt;<a class="code" href="structhandler__registration__s.html#m3">rootoid_len</a> * <font class="keyword">sizeof</font>(oid));
00218 
00220     coloid[reginfo-&gt;<a class="code" href="structhandler__registration__s.html#m3">rootoid_len</a>] = 1;
00221 
00223     coloid[reginfo-&gt;<a class="code" href="structhandler__registration__s.html#m3">rootoid_len</a>+1] = tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m0">colnum</a>;
00224 
00226     memcpy(&amp;coloid[reginfo-&gt;<a class="code" href="structhandler__registration__s.html#m3">rootoid_len</a>+2], row-&gt;idx,
00227            row-&gt;idx_len * <font class="keyword">sizeof</font>(oid));
00228 
00229     snmp_set_var_objid(current-&gt;<a class="code" href="structrequest__info__s.html#m0">requestvb</a>, coloid,
00230                        reginfo-&gt;<a class="code" href="structhandler__registration__s.html#m3">rootoid_len</a> + 2 + row-&gt;idx_len);
00231 }
</pre></div>    </td>
  </tr>
</table>
<a name="a4" doxytag="table_array.c::extract_array_context"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> oid_array* extract_array_context </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="snmp__agent_8h.html#a18">request_info</a> *&nbsp;</td>
          <td class="mdname1">&nbsp; <em>request</em>          </td>
          <td class="md">)&nbsp;</td>
          <td class="md"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="table__array_8c-source.html#l00083">83</a> of file <a class="el" href="table__array_8c-source.html">table_array.c</a>.<div class="fragment"><pre>00084 {
00085     <font class="keywordflow">return</font> <a class="code" href="helpers_2agent__handler_8h.html#a24">request_get_list_data</a>(request, <a class="code" href="table__array_8h.html#a0">TABLE_ARRAY_NAME</a>);
00086 }
</pre></div>    </td>
  </tr>
</table>
<a name="a8" doxytag="table_array.c::find_next_row"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> oid_array_header* find_next_row </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="table_8h.html#a12">table_request_info</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>tblreq_info</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="table__array_8c.html#a1">table_array_data</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>tad</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="table__array_8c-source.html#l00167">167</a> of file <a class="el" href="table__array_8c-source.html">table_array.c</a>.
<p>
Referenced by <a class="el" href="table__array_8c-source.html#l00243">process_get_requests</a>().
<p>
<div class="fragment"><pre>00168 {
00169     oid_array_header *row = NULL;
00170     oid_array_header index;
00171 
00172     <font class="comment">/*</font>
00173      * below our minimum column?
00174      */
00175     <font class="keywordflow">if</font> (tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m0">colnum</a> &lt; tad-&gt;<a class="code" href="structtable__array__data__s.html#m0">tblreg_info</a>-&gt;min_column) {
00176         tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m0">colnum</a> = tad-&gt;<a class="code" href="structtable__array__data__s.html#m0">tblreg_info</a>-&gt;min_column;
00177         row = Get_oid_data( tad-&gt;<a class="code" href="structtable__array__data__s.html#m1">array</a>, NULL, 0 );
00178     }
00179     <font class="keywordflow">else</font> {
00180         index.idx = tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m3">index_oid</a>;
00181         index.idx_len = tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m4">index_oid_len</a>;
00182 
00183         row = Get_oid_data( tad-&gt;<a class="code" href="structtable__array__data__s.html#m1">array</a>, &amp;index, 0 );
00184 
00185         <font class="comment">/*</font>
00186          * we don't have a row, but we might be at the end of a
00187          * column, so try the next one.
00188          */
00189         <font class="keywordflow">if</font> (!row) {
00190             ++tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m0">colnum</a>;
00191             <font class="keywordflow">if</font>(tad-&gt;<a class="code" href="structtable__array__data__s.html#m0">tblreg_info</a>-&gt;valid_columns) {
00192                 tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m0">colnum</a> = closest_column
00193                     (tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m0">colnum</a>,
00194                      tad-&gt;<a class="code" href="structtable__array__data__s.html#m0">tblreg_info</a>-&gt;valid_columns);
00195             }
00196             <font class="keywordflow">else</font> <font class="keywordflow">if</font>(tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m0">colnum</a> &gt; tad-&gt;<a class="code" href="structtable__array__data__s.html#m0">tblreg_info</a>-&gt;max_column)
00197                 tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m0">colnum</a> = 0;
00198             
00199             <font class="keywordflow">if</font>(tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m0">colnum</a> != 0)
00200                 row = Get_oid_data( tad-&gt;<a class="code" href="structtable__array__data__s.html#m1">array</a>, NULL, 0 );
00201         }
00202     }
00203 
00204     <font class="keywordflow">return</font> row;
00205 }
</pre></div>    </td>
  </tr>
</table>
<a name="a11" doxytag="table_array.c::group_requests"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void group_requests </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="snmp__agent_8h.html#a21">agent_request_info</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>agtreq_info</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="snmp__agent_8h.html#a18">request_info</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>requests</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>oid_array&nbsp;</td>
          <td class="mdname">&nbsp; <em>array_group_tbl</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="table__array_8c.html#a1">table_array_data</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>tad</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
for ( ...
<p>
requests ... ) 
<p>
Definition at line <a class="el" href="table__array_8c-source.html#l00341">341</a> of file <a class="el" href="table__array_8c-source.html">table_array.c</a>.
<p>
Referenced by <a class="el" href="table__array_8c-source.html#l00532">process_set_requests</a>().
<p>
<div class="fragment"><pre>00343 {
00344     <a class="code" href="struct__table__request__info.html">table_request_info</a> *tblreq_info;
00345     <font class="keyword">struct </font>variable_list * var;
00346     oid_array_header *row, *tmp, index;
00347     <a class="code" href="structrequest__info__s.html">request_info</a> * current;
00348     <a class="code" href="structarray__group__s.html">array_group</a> * g;
00349     <a class="code" href="structarray__group__item__s.html">array_group_item</a> * i;
00350 
00351     <font class="keywordflow">for</font>( current = requests; current; current = current-&gt;<a class="code" href="structrequest__info__s.html#m8">next</a>) {
00352             
00353         <font class="comment">/* 3.2.1 Setup and paranoia</font>
00354          *
00355          * Get pointer to the table information for this request. This
00356          * information was saved by table_helper_handler. When
00357          * debugging, we double check a few assumptions. For example,
00358          * the table_helper_handler should enforce column boundaries.
00359          */
00360         row = NULL;
00361         var = current-&gt;<a class="code" href="structrequest__info__s.html#m0">requestvb</a>;
00362         tblreq_info = <a class="code" href="table_8h.html#a25">extract_table_info</a>(current);
00363         assert(tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m0">colnum</a> &lt;= tad-&gt;<a class="code" href="structtable__array__data__s.html#m0">tblreg_info</a>-&gt;max_column);
00364         
00365         DEBUGMSGTL((<font class="stringliteral">"helper:table_array:group"</font>, <font class="stringliteral">"  oid:"</font>));
00366         DEBUGMSGOID((<font class="stringliteral">"helper:table_array:group"</font>, var-&gt;name, var-&gt;name_length));
00367         DEBUGMSG((<font class="stringliteral">"helper:table_array:group"</font>, <font class="stringliteral">"\n"</font>));
00368 
00369         <font class="comment">/*</font>
00370          * skip anything that doesn't need processing.
00371          */
00372         <font class="keywordflow">if</font> (current-&gt;<a class="code" href="structrequest__info__s.html#m5">processed</a> != 0) {
00373             DEBUGMSGTL((<font class="stringliteral">"helper:table_array:group"</font>, <font class="stringliteral">"already processed\n"</font>));
00374             <font class="keywordflow">continue</font>;
00375         }
00376 
00377         <font class="comment">/*</font>
00378          * search for index
00379          */
00380         index.idx = tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m3">index_oid</a>;
00381         index.idx_len = tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m4">index_oid_len</a>;
00382         DEBUGMSGTL((<font class="stringliteral">"helper:table_array:group"</font>, <font class="stringliteral">"    index "</font>));
00383         DEBUGMSGOID((<font class="stringliteral">"helper:table_array:group"</font>, index.idx,index.idx_len));
00384         DEBUGMSG((<font class="stringliteral">"helper:table_array:group"</font>, <font class="stringliteral">"\n"</font>));
00385         tmp = Get_oid_data( array_group_tbl, &amp;index, 1);
00386         <font class="keywordflow">if</font>(tmp) {
00387             DEBUGMSGTL((<font class="stringliteral">"helper:table_array:group"</font>, <font class="stringliteral">"    existing group\n"</font>));
00388             g = (<a class="code" href="structarray__group__s.html">array_group</a>*)tmp;
00389             i = SNMP_MALLOC_TYPEDEF(<a class="code" href="structarray__group__item__s.html">array_group_item</a>);
00390             i-&gt;<a class="code" href="structarray__group__item__s.html#m0">ri</a> = current;
00391             i-&gt;<a class="code" href="structarray__group__item__s.html#m1">tri</a> = tblreq_info;
00392             i-&gt;<a class="code" href="structarray__group__item__s.html#m2">next</a> = g-&gt;<a class="code" href="structarray__group__s.html#m4">list</a>;
00393             g-&gt;<a class="code" href="structarray__group__s.html#m4">list</a> = i;
00394             <font class="keywordflow">continue</font>;
00395         }
00396 
00397         DEBUGMSGTL((<font class="stringliteral">"helper:table_array:group"</font>, <font class="stringliteral">"    new group\n"</font>));
00398         g = SNMP_MALLOC_TYPEDEF(<a class="code" href="structarray__group__s.html">array_group</a>);
00399         i = SNMP_MALLOC_TYPEDEF(<a class="code" href="structarray__group__item__s.html">array_group_item</a>);
00400         g-&gt;<a class="code" href="structarray__group__s.html#m4">list</a> = i;
00401         g-&gt;<a class="code" href="structarray__group__s.html#m1">table</a> = tad-&gt;<a class="code" href="structtable__array__data__s.html#m1">array</a>;
00402         i-&gt;<a class="code" href="structarray__group__item__s.html#m0">ri</a> = current;
00403         i-&gt;<a class="code" href="structarray__group__item__s.html#m1">tri</a> = tblreq_info;
00404 
00405         <font class="comment">/*</font>
00406          * search for row
00407          */
00408         row = g-&gt;<a class="code" href="structarray__group__s.html#m2">old_row</a> = Get_oid_data( tad-&gt;<a class="code" href="structtable__array__data__s.html#m1">array</a>, &amp;index, 1 );
00409         <font class="keywordflow">if</font>(!g-&gt;<a class="code" href="structarray__group__s.html#m2">old_row</a>){
00410             <font class="keywordflow">if</font>(! tad-&gt;<a class="code" href="structtable__array__data__s.html#m3">cb</a>-&gt;create_row) {
00411                 <a class="code" href="snmp__agent_8h.html#a39">set_request_error</a>(agtreq_info, current, SNMP_ERR_NOSUCHNAME);
00412                 free(g);
00413                 free(i);
00414                 <font class="keywordflow">continue</font>;
00415             }
00416 
00417             row = g-&gt;<a class="code" href="structarray__group__s.html#m3">new_row</a> = tad-&gt;<a class="code" href="structtable__array__data__s.html#m3">cb</a>-&gt;create_row( &amp;index );
00418             <font class="keywordflow">if</font>( !row ) {
00419                 <a class="code" href="snmp__agent_8h.html#a39">set_request_error</a>(agtreq_info, current, SNMP_ERR_GENERR);
00420                 free(g);
00421                 free(i);
00422                 <font class="keywordflow">continue</font>;
00423             }
00424         }
00425 
00426         g-&gt;<a class="code" href="structarray__group__s.html#m0">index</a>.idx = row-&gt;idx;
00427         g-&gt;<a class="code" href="structarray__group__s.html#m0">index</a>.idx_len = row-&gt;idx_len;
00428 
00429         Add_oid_data( array_group_tbl, g );
00430 
00431     } 
00432 }
</pre></div>    </td>
  </tr>
</table>
<a name="a10" doxytag="table_array.c::process_get_requests"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int process_get_requests </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="helpers_2agent__handler_8h.html#a9">handler_registration</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>reginfo</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="snmp__agent_8h.html#a21">agent_request_info</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>agtreq_info</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="snmp__agent_8h.html#a18">request_info</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>requests</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="table__array_8c.html#a1">table_array_data</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>tad</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
table.entry.column.index.
<p>

<p>
Definition at line <a class="el" href="table__array_8c-source.html#l00243">243</a> of file <a class="el" href="table__array_8c-source.html">table_array.c</a>.
<p>
Referenced by <a class="el" href="table__array_8c-source.html#l00583">table_array_helper_handler</a>().
<p>
<div class="fragment"><pre>00247 {
00248     <font class="keywordtype">int</font> rc = SNMP_ERR_NOERROR;
00249     <a class="code" href="structrequest__info__s.html">request_info</a> * current;
00250     oid_array_header *row = NULL;
00251 
00252     <font class="comment">/*</font>
00253      * Loop through each of the requests, and
00254      * try to find the appropriate row from the oid_array.
00255      */
00256     <font class="keywordflow">for</font>( current = requests; current; current = current-&gt;<a class="code" href="structrequest__info__s.html#m8">next</a>) {
00257 
00258         <font class="comment">/* </font>
00259          * Get pointer to the table information for this request. This
00260          * information was saved by table_helper_handler. When
00261          * debugging, we double check a few assumptions. For example,
00262          * the table_helper_handler should enforce column boundaries.
00263          */
00264         <a class="code" href="struct__table__request__info.html">table_request_info</a> *tblreq_info = <a class="code" href="table_8h.html#a25">extract_table_info</a>(current);
00265         <font class="keyword">struct </font>variable_list * var = current-&gt;requestvb;
00266         assert(tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m0">colnum</a> &lt;= tad-&gt;<a class="code" href="structtable__array__data__s.html#m0">tblreg_info</a>-&gt;max_column);
00267         
00268         DEBUGMSGTL((<font class="stringliteral">"helper:table_array:get"</font>, <font class="stringliteral">"  process_get_request oid:"</font>));
00269         DEBUGMSGOID((<font class="stringliteral">"helper:table_array:get"</font>, var-&gt;name, var-&gt;name_length));
00270         DEBUGMSG((<font class="stringliteral">"helper:table_array:get"</font>, <font class="stringliteral">"\n"</font>));
00271 
00272         <font class="comment">/*</font>
00273          * skip anything that doesn't need processing.
00274          */
00275         <font class="keywordflow">if</font> (current-&gt;<a class="code" href="structrequest__info__s.html#m5">processed</a> != 0) {
00276             DEBUGMSGTL((<font class="stringliteral">"helper:table_array:get"</font>, <font class="stringliteral">"already processed\n"</font>));
00277             <font class="keywordflow">continue</font>;
00278         }
00279 
00280         <font class="keywordflow">if</font>((agtreq_info-&gt;<a class="code" href="structagent__request__info__s.html#m0">mode</a> == <a class="code" href="snmp__agent_8h.html#a5">MODE_GETNEXT</a>) ||
00281            (agtreq_info-&gt;<a class="code" href="structagent__request__info__s.html#m0">mode</a> == <a class="code" href="snmp__agent_8h.html#a6">MODE_GETBULK</a>)) {
00282             <font class="comment">/*</font>
00283              * find the row
00284              */
00285             row = <a class="code" href="table__array_8c.html#a8">find_next_row</a>(tblreq_info, tad);
00286             <font class="keywordflow">if</font> (!row) {
00287                 <font class="comment">/*</font>
00288                  * no results found.
00289                  *
00290                  * xxx-rks: how do we skip this entry for the next handler,
00291                  * but still allow it a chance to hit another handler?
00292                  */
00293                 DEBUGMSGTL((<font class="stringliteral">"helper:table_array:get"</font>, <font class="stringliteral">"no row found\n"</font>));
00294                 <font class="keywordflow">continue</font>;
00295             }
00296         
00297                         <font class="comment">/*</font>
00298              * if data was found, make sure it has the column we want
00299              */
00300 <font class="preprocessor">#warning "xxx-rks: add suport for sparse tables"</font>
00301 
00302             <font class="comment">/*</font>
00303              * build new oid
00304              */
00305             <a class="code" href="table__array_8c.html#a9">build_new_oid</a>( reginfo, tblreq_info, row, current );
00306 
00307         } 
00308         <font class="keywordflow">else</font> {
00309             oid_array_header index;
00310             index.idx = tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m3">index_oid</a>;
00311             index.idx_len = tblreq_info-&gt;<a class="code" href="struct__table__request__info.html#m4">index_oid_len</a>;
00312 
00313             row = Get_oid_data( tad-&gt;<a class="code" href="structtable__array__data__s.html#m1">array</a>, &amp;index, 1 );
00314             <font class="keywordflow">if</font>(!row) {
00315                 DEBUGMSGTL((<font class="stringliteral">"helper:table_array:get"</font>, <font class="stringliteral">"no row found\n"</font>));
00316                 <a class="code" href="snmp__agent_8h.html#a39">set_request_error</a>(agtreq_info, current, SNMP_ERR_NOSUCHNAME);
00317                 <font class="keywordflow">continue</font>;
00318             }
00319         } 
00321         <font class="comment">/*</font>
00322          * get the data
00323          */
00324         rc = tad-&gt;<a class="code" href="structtable__array__data__s.html#m3">cb</a>-&gt;get_value( current, row, tblreq_info );
00325 
00326     } 
00328     <font class="keywordflow">return</font> rc;
00329 }
</pre></div>    </td>
  </tr>
</table>
<a name="a12" doxytag="table_array.c::process_set_group"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void process_set_group </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap>oid_array_header *&nbsp;</td>
          <td class="mdname">&nbsp; <em>o</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname">&nbsp; <em>c</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
for( current ...
<p>
) 
<p>
Definition at line <a class="el" href="table__array_8c-source.html#l00435">435</a> of file <a class="el" href="table__array_8c-source.html">table_array.c</a>.<div class="fragment"><pre>00436 {
00437 <font class="preprocessor">#warning "should we continue processing after an error??"</font>
00438     <a class="code" href="structset__context__s.html">set_context</a> * context = (<a class="code" href="structset__context__s.html">set_context</a> *)c;
00439     <a class="code" href="structarray__group__s.html">array_group</a> * ag = (<a class="code" href="structarray__group__s.html">array_group</a> *)o;
00440 
00441     <font class="keywordflow">if</font>(context-&gt;<a class="code" href="structset__context__s.html#m2">status</a> != SNMP_ERR_NOERROR)
00442         <font class="keywordflow">return</font>;
00443 
00444     <font class="keywordflow">switch</font>(context-&gt;<a class="code" href="structset__context__s.html#m0">agtreq_info</a>-&gt;mode) {
00445 
00446     <font class="keywordflow">case</font> <a class="code" href="snmp__agent_8h.html#a9">MODE_SET_RESERVE1</a>: 
00447         <font class="keywordflow">if</font>(context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;set_reserve1) context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;set_reserve1( ag );
00449         <font class="keywordflow">break</font>;
00450         
00451     <font class="keywordflow">case</font> <a class="code" href="snmp__agent_8h.html#a10">MODE_SET_RESERVE2</a>: 
00452         <font class="keywordflow">if</font>(context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;set_reserve2) context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;set_reserve2( ag );
00454         <font class="keywordflow">break</font>;
00455         
00456     <font class="keywordflow">case</font> <a class="code" href="snmp__agent_8h.html#a11">MODE_SET_ACTION</a>: 
00457         <font class="keywordflow">if</font>(ag-&gt;<a class="code" href="structarray__group__s.html#m2">old_row</a>) {
00459             <font class="keywordflow">if</font>(ag-&gt;<a class="code" href="structarray__group__s.html#m3">new_row</a>) {
00460                 Replace_oid_data(ag-&gt;<a class="code" href="structarray__group__s.html#m1">table</a>,ag-&gt;<a class="code" href="structarray__group__s.html#m3">new_row</a>);
00461             }
00462             <font class="keywordflow">else</font> {
00463                 Remove_oid_data(ag-&gt;<a class="code" href="structarray__group__s.html#m1">table</a>,ag-&gt;<a class="code" href="structarray__group__s.html#m2">old_row</a>,NULL);
00464             }
00465         }
00466         <font class="keywordflow">else</font> {
00468             Add_oid_data(ag-&gt;<a class="code" href="structarray__group__s.html#m1">table</a>,ag-&gt;<a class="code" href="structarray__group__s.html#m3">new_row</a>);
00469         }
00470         
00471         <font class="keywordflow">if</font>(context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;set_action) context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;set_action( ag );
00473         <font class="keywordflow">break</font>;
00474         
00475     <font class="keywordflow">case</font> <a class="code" href="snmp__agent_8h.html#a12">MODE_SET_COMMIT</a>: 
00476         <font class="keywordflow">if</font>(context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;set_commit) context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;set_commit( ag );
00478 
00480         <font class="keywordflow">if</font>(ag-&gt;<a class="code" href="structarray__group__s.html#m2">old_row</a> &amp;&amp; context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;delete_row) {
00481             context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;delete_row(ag-&gt;<a class="code" href="structarray__group__s.html#m2">old_row</a>);
00482             ag-&gt;<a class="code" href="structarray__group__s.html#m2">old_row</a> = NULL;
00483         }
00484         <font class="keywordflow">break</font>;
00485         
00486     <font class="keywordflow">case</font> <a class="code" href="snmp__agent_8h.html#a13">MODE_SET_FREE</a>: 
00487         <font class="keywordflow">if</font>(context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;set_free) context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;set_free( ag );
00489 
00490         <font class="keywordflow">if</font>(ag-&gt;<a class="code" href="structarray__group__s.html#m2">old_row</a> &amp;&amp; context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;delete_row) {
00491             context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;delete_row(ag-&gt;<a class="code" href="structarray__group__s.html#m3">new_row</a>);
00492             ag-&gt;<a class="code" href="structarray__group__s.html#m3">new_row</a> = NULL;
00493         }
00494         <font class="keywordflow">break</font>;
00495         
00496     <font class="keywordflow">case</font> <a class="code" href="snmp__agent_8h.html#a14">MODE_SET_UNDO</a>: 
00497         <font class="keywordflow">if</font>(ag-&gt;<a class="code" href="structarray__group__s.html#m3">new_row</a>) {
00499             <font class="keywordflow">if</font>(ag-&gt;<a class="code" href="structarray__group__s.html#m2">old_row</a>) {
00500                 Replace_oid_data(ag-&gt;<a class="code" href="structarray__group__s.html#m1">table</a>,ag-&gt;<a class="code" href="structarray__group__s.html#m2">old_row</a>);
00501             }
00502             <font class="keywordflow">else</font> {
00503                 Remove_oid_data(ag-&gt;<a class="code" href="structarray__group__s.html#m1">table</a>,ag-&gt;<a class="code" href="structarray__group__s.html#m3">new_row</a>,NULL);
00504             }
00505         }
00506         <font class="keywordflow">else</font> {
00508             assert(ag-&gt;<a class="code" href="structarray__group__s.html#m2">old_row</a> != NULL);
00510             Add_oid_data(ag-&gt;<a class="code" href="structarray__group__s.html#m1">table</a>,ag-&gt;<a class="code" href="structarray__group__s.html#m2">old_row</a>);
00511         }
00513         <font class="keywordflow">if</font>(context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;set_undo)
00514             context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;set_undo( ag );
00515 
00516         <font class="keywordflow">if</font>(ag-&gt;<a class="code" href="structarray__group__s.html#m3">new_row</a> &amp;&amp; context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;delete_row) {
00517             context-&gt;<a class="code" href="structset__context__s.html#m1">tad</a>-&gt;cb-&gt;delete_row(ag-&gt;<a class="code" href="structarray__group__s.html#m3">new_row</a>);
00518             ag-&gt;<a class="code" href="structarray__group__s.html#m3">new_row</a> = NULL;
00519         }
00520         <font class="keywordflow">break</font>;
00521         
00522     <font class="keywordflow">default</font>:
00523         snmp_log(LOG_ERR, <font class="stringliteral">"unknown mode processing SET for "</font>
00524                  <font class="stringliteral">"table_array_helper_handler\n"</font>);;
00526         <font class="keywordflow">break</font>;
00527     }
00528 
00529 }
</pre></div>    </td>
  </tr>
</table>
<a name="a13" doxytag="table_array.c::process_set_requests"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int process_set_requests </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="snmp__agent_8h.html#a21">agent_request_info</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>agtreq_info</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="snmp__agent_8h.html#a18">request_info</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>requests</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="table__array_8c.html#a1">table_array_data</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>tad</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname">&nbsp; <em>handler_name</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
context-&gt;status = SNMP_ERR_GENERR.
<p>

<p>
Definition at line <a class="el" href="table__array_8c-source.html#l00532">532</a> of file <a class="el" href="table__array_8c-source.html">table_array.c</a>.
<p>
Referenced by <a class="el" href="table__array_8c-source.html#l00583">table_array_helper_handler</a>().
<p>
<div class="fragment"><pre>00536 {
00537     <a class="code" href="structset__context__s.html">set_context</a> context;
00538     oid_array array_group_tbl;
00539 
00540     <font class="comment">/*</font>
00541      * create and save structure for set info
00542      */
00543     array_group_tbl = (oid_array)agent_get_list_data
00544         (agtreq_info, handler_name);
00545     <font class="keywordflow">if</font>(array_group_tbl == NULL) {
00546         data_list *tmp;
00547         array_group_tbl = Initialise_oid_array( <font class="keyword">sizeof</font>(<font class="keywordtype">void</font>*) );
00548 
00549         DEBUGMSGTL((<font class="stringliteral">"helper:table_array"</font>, <font class="stringliteral">"Grouping requests by oid\n"</font>));
00550 
00551         tmp = create_data_list(handler_name,
00552                                array_group_tbl,
00553                                release_array_groups);
00554         <a class="code" href="snmp__agent_8h.html#a49">agent_add_list_data</a>(agtreq_info, tmp);
00555         <font class="comment">/*</font>
00556          * group requests.
00557          */
00558         <a class="code" href="table__array_8c.html#a11">group_requests</a>( agtreq_info, requests, array_group_tbl, tad );
00559     }
00560 
00561     <font class="comment">/*</font>
00562      * process each group one at a time
00563      */
00564     context.<a class="code" href="structset__context__s.html#m0">agtreq_info</a> = agtreq_info;
00565     context.<a class="code" href="structset__context__s.html#m1">tad</a> = tad;
00566     context.<a class="code" href="structset__context__s.html#m2">status</a> = SNMP_ERR_NOERROR;
00567     For_each_oid_data( array_group_tbl, <a class="code" href="table__array_8c.html#a12">process_set_group</a>, &amp;context, 0 );
00568 
00569     <font class="keywordflow">return</font> context.<a class="code" href="structset__context__s.html#m2">status</a>;
00570 }
</pre></div>    </td>
  </tr>
</table>
<a name="a3" doxytag="table_array.c::register_table_array"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int register_table_array </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="helpers_2agent__handler_8h.html#a9">handler_registration</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>reginfo</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="table_8h.html#a11">table_registration_info</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>tabreq</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="table__array_8h.html#a4">table_array_callbacks</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>cb</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname">&nbsp; <em>group_rows</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="table__array_8c-source.html#l00067">67</a> of file <a class="el" href="table__array_8c-source.html">table_array.c</a>.<div class="fragment"><pre>00071 {
00072     <a class="code" href="structtable__array__data__s.html">table_array_data</a> * tad = SNMP_MALLOC_TYPEDEF(<a class="code" href="structtable__array__data__s.html">table_array_data</a>);
00073     tad-&gt;<a class="code" href="structtable__array__data__s.html#m0">tblreg_info</a> = tabreg; <font class="comment">/* we need it too, but it really is not ours */</font>
00074     tad-&gt;<a class="code" href="structtable__array__data__s.html#m1">array</a> = Initialise_oid_array( <font class="keyword">sizeof</font>(<font class="keywordtype">void</font>*) );
00075     tad-&gt;<a class="code" href="structtable__array__data__s.html#m3">cb</a> = cb;
00076 
00077     reginfo-&gt;<a class="code" href="structhandler__registration__s.html#m4">handler</a>-&gt;myvoid = tad;
00078 
00079     <font class="keywordflow">return</font> <a class="code" href="ttest_8c.html#a1">register_table</a>(reginfo, tabreg);
00080 }
</pre></div>    </td>
  </tr>
</table>
<a name="a5" doxytag="table_array.c::table_array_get_by_index"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const oid_array_header* table_array_get_by_index </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="helpers_2agent__handler_8h.html#a9">handler_registration</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>reginfo</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>oid_array_header *&nbsp;</td>
          <td class="mdname">&nbsp; <em>hdr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="table__array_8c-source.html#l00089">89</a> of file <a class="el" href="table__array_8c-source.html">table_array.c</a>.<div class="fragment"><pre>00091 {
00092     <a class="code" href="structtable__array__data__s.html">table_array_data</a>* tad;
00093     
00094     <font class="keywordflow">if</font>(!reginfo ||
00095        !reginfo-&gt;<a class="code" href="structhandler__registration__s.html#m4">handler</a> ||
00096        ! reginfo-&gt;<a class="code" href="structhandler__registration__s.html#m4">handler</a>-&gt;next ||
00097        ! reginfo-&gt;<a class="code" href="structhandler__registration__s.html#m4">handler</a>-&gt;next-&gt;myvoid )
00098         <font class="keywordflow">return</font> NULL;
00099 
00100     tad = (<a class="code" href="structtable__array__data__s.html">table_array_data</a>*)
00101         reginfo-&gt;<a class="code" href="structhandler__registration__s.html#m4">handler</a>-&gt;next-&gt;myvoid;
00102     <font class="keywordflow">if</font>(!tad-&gt;<a class="code" href="structtable__array__data__s.html#m1">array</a>)
00103         <font class="keywordflow">return</font> NULL;
00104 
00105     <font class="keywordflow">return</font> Get_oid_data( tad-&gt;<a class="code" href="structtable__array__data__s.html#m1">array</a>, hdr, 1 );
00106 }
</pre></div>    </td>
  </tr>
</table>
<a name="a14" doxytag="table_array.c::table_array_helper_handler"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int table_array_helper_handler </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="helpers_2agent__handler_8h.html#a8">mib_handler</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>handler</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="helpers_2agent__handler_8h.html#a9">handler_registration</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>reginfo</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="snmp__agent_8h.html#a21">agent_request_info</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>agtreq_info</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="snmp__agent_8h.html#a18">request_info</a> *&nbsp;</td>
          <td class="mdname">&nbsp; <em>requests</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="table__array_8c-source.html#l00583">583</a> of file <a class="el" href="table__array_8c-source.html">table_array.c</a>.<div class="fragment"><pre>00587                                          {
00588   
00589     <font class="comment">/*</font>
00590      * First off, get our pointer from the handler. This
00591      * lets us get to the table registration information we
00592      * saved in get_table_array_handler(), as well as the
00593      * oid_array where the actual table data is stored.
00594      */
00595     <font class="keywordtype">int</font> rc = SNMP_ERR_NOERROR;
00596     <a class="code" href="structtable__array__data__s.html">table_array_data</a> * tad = (<a class="code" href="structtable__array__data__s.html">table_array_data</a>*)handler-&gt;<a class="code" href="structmib__handler__s.html#m1">myvoid</a>;
00597 
00598     <font class="keywordflow">if</font>( agtreq_info-&gt;<a class="code" href="structagent__request__info__s.html#m0">mode</a> &lt; 0 || agtreq_info-&gt;<a class="code" href="structagent__request__info__s.html#m0">mode</a> &gt; 5 ) {
00599         DEBUGMSGTL((<font class="stringliteral">"helper:table_array"</font>, <font class="stringliteral">"Mode %d, Got request:\n"</font>,
00600                     agtreq_info-&gt;<a class="code" href="structagent__request__info__s.html#m0">mode</a>));
00601     }
00602     <font class="keywordflow">else</font> {
00603         DEBUGMSGTL((<font class="stringliteral">"helper:table_array"</font>, <font class="stringliteral">"Mode %s, Got request:\n"</font>,
00604                     mode_name[agtreq_info-&gt;<a class="code" href="structagent__request__info__s.html#m0">mode</a>]));
00605     }
00606 
00607     <font class="comment">/*</font>
00608      * 3.1.1
00609      *
00610      * This handler will be called 1 time for any type of GET
00611      * request, but will be called multiple times for SET
00612      * requests. We don't need to find each row for every
00613      * pass of the SET processing, so we'll cache results.
00614      */
00615     <font class="keywordflow">if</font>(<a class="code" href="snmp__agent_8h.html#a15">MODE_IS_SET</a>(agtreq_info-&gt;<a class="code" href="structagent__request__info__s.html#m0">mode</a>))
00616         rc = <a class="code" href="table__array_8c.html#a13">process_set_requests</a>( agtreq_info, requests,
00617                                    tad, handler-&gt;<a class="code" href="structmib__handler__s.html#m0">handler_name</a> );
00618     <font class="keywordflow">else</font>
00619         rc = <a class="code" href="table__array_8c.html#a10">process_get_requests</a>( reginfo, agtreq_info, requests, tad );
00620 
00621     <font class="comment">/*</font>
00622      * Now we should have row pointers for each request. Call the
00623      * next handler to process the row.
00624      *
00625      * rc = call_next_handler(handler, reginfo, agtreq_info, requests);
00626      */
00627 
00628     <font class="keywordflow">return</font> rc;
00629 }
</pre></div>    </td>
  </tr>
</table>
<hr><address><small>Generated on Sat Nov 10 14:09:56 2001 for net-snmp by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.11 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
<!--#include virtual="/sfbutton.html" -->
<!--#include virtual="/sfbutton.html" -->
<!-- CONTENT END -->