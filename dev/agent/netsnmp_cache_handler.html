---
section: development
---
<!-- CONTENT START -->
<HTML><BODY bgcolor="#ffffff" background="../ucd-snmp-bg3.gif"><PRE>

<HTML><HEAD><TITLE>Manpage of cache_handler: Maintains a cache of data for use by lower level handlers.</TITLE>
</HEAD><BODY>
<H1>cache_handler: Maintains a cache of data for use by lower level handlers.</H1>
Section: C Library Functions (3)<BR>Updated: 22 Mar 2004<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>



<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

cache_handler: Maintains a cache of data for use by lower level handlers. - This helper checks to see whether the data has been loaded 'recently' (according to the timeout for that particular cache) and calls the registered 'load_cache' routine if necessary. 
More...
<A NAME="lbAC">&nbsp;</A>
<H3>Functions</H3>

<P>

<BR>

<B>netsnmp_mib_handler</B> * <B>netsnmp_get_cache_handler</B> (int timeout, NetsnmpCacheLoad *load_hook, NetsnmpCacheFree *free_hook, oid *rootoid, int rootoid_len)

<BR>

<I>returns a cache handler that can be injected into a given handler chain.</I>

<BR>

int <B>netsnmp_register_cache_handler</B> (<B>netsnmp_handler_registration</B> *reginfo, int timeout, NetsnmpCacheLoad *load_hook, NetsnmpCacheFree *free_hook)

<BR>

<I>functionally the same as calling </I><B>netsnmp_register_handler()</B> but also injects a cache handler at the same time for you.

<BR>

netsnmp_cache * <B>netsnmp_extract_cache_info</B> (netsnmp_agent_request_info *reqinfo)

<BR>

<I>Extract the cache information for a given request.</I>

<BR>

int <B>netsnmp_is_cache_valid</B> (netsnmp_agent_request_info *reqinfo)

<BR>

<I>Is the cache valid for a given request?</I>

<BR>

int <B>netsnmp_cache_helper_handler</B> (<B>netsnmp_mib_handler</B> *handler, <B>netsnmp_handler_registration</B> *reginfo, netsnmp_agent_request_info *reqinfo, netsnmp_request_info *requests)

<BR>

<I>Implements the cache handler.</I>

<BR>

void <B>release_cached_resources</B> (unsigned int regNo, void *clientargs)

<BR>

<I>run regularly to automatically release cached resources.</I>


<A NAME="lbAD">&nbsp;</A>
<H2>DETAILED DESCRIPTION</H2>

<P>

This helper checks to see whether the data has been loaded 'recently' (according to the timeout for that particular cache) and calls the registered 'load_cache' routine if necessary.
<P>

The lower handlers can then work with this local cached data. 
<A NAME="lbAE">&nbsp;</A>
<H2>FUNCTION DOCUMENTATION</H2>

<P>

<A NAME="lbAF">&nbsp;</A>
<H3>int netsnmp_cache_helper_handler (<B>netsnmp_mib_handler</B> * handler, <B>netsnmp_handler_registration</B> * reginfo, netsnmp_agent_request_info * reqinfo, netsnmp_request_info * requests)</H3>

<P>

Implements the cache handler.
<P>

Definition at line 107 of file cache_handler.c.
<P>

References atime_newMarker(), atime_ready(), atime_setMarker(), netsnmp_agent_request_info_s::mode, netsnmp_mib_handler_s::myvoid, netsnmp_call_next_handler(), netsnmp_create_data_list(), release_cached_resources(), netsnmp_handler_registration_s::rootoid, netsnmp_handler_registration_s::rootoid_len, snmp_alarm_register(), and snmp_log().
<P>

Referenced by netsnmp_get_cache_handler().
<A NAME="lbAG">&nbsp;</A>
<H3>netsnmp_cache* netsnmp_extract_cache_info (netsnmp_agent_request_info * reqinfo)</H3>

<P>

Extract the cache information for a given request.
<P>

Definition at line 92 of file cache_handler.c.
<P>

Referenced by netsnmp_is_cache_valid().
<A NAME="lbAH">&nbsp;</A>
<H3><B>netsnmp_mib_handler</B>* netsnmp_get_cache_handler (int timeout, NetsnmpCacheLoad * load_hook, NetsnmpCacheFree * free_hook, oid * rootoid, int rootoid_len)</H3>

<P>

returns a cache handler that can be injected into a given handler chain.
<P>

Definition at line 39 of file cache_handler.c.
<P>

References netsnmp_mib_handler_s::myvoid, netsnmp_cache_helper_handler(), netsnmp_create_handler(), and SNMP_MALLOC_TYPEDEF.
<P>

Referenced by netsnmp_register_cache_handler().
<A NAME="lbAI">&nbsp;</A>
<H3>int netsnmp_is_cache_valid (netsnmp_agent_request_info * reqinfo)</H3>

<P>

Is the cache valid for a given request?
<P>

Definition at line 99 of file cache_handler.c.
<P>

References netsnmp_extract_cache_info().
<A NAME="lbAJ">&nbsp;</A>
<H3>int netsnmp_register_cache_handler (<B>netsnmp_handler_registration</B> * reginfo, int timeout, NetsnmpCacheLoad * load_hook, NetsnmpCacheFree * free_hook)</H3>

<P>

functionally the same as calling <B>netsnmp_register_handler()</B> but also injects a cache handler at the same time for you.
<P>

Definition at line 78 of file cache_handler.c.
<P>

References netsnmp_get_cache_handler(), netsnmp_inject_handler(), netsnmp_register_handler(), netsnmp_handler_registration_s::rootoid, and netsnmp_handler_registration_s::rootoid_len.
<A NAME="lbAK">&nbsp;</A>
<H3>void release_cached_resources (unsigned int regNo, void * clientargs)</H3>

<P>

run regularly to automatically release cached resources.
<P>

Definition at line 206 of file cache_handler.c.
<P>

References atime_ready(), release_cached_resources(), and snmp_alarm_register().
<P>

Referenced by netsnmp_cache_helper_handler(), and release_cached_resources().
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DL>
<DT><A HREF="#lbAC">Functions</A><DD>
</DL>
<DT><A HREF="#lbAD">DETAILED DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">FUNCTION DOCUMENTATION</A><DD>
<DL>
<DT><A HREF="#lbAF">int netsnmp_cache_helper_handler (<B>netsnmp_mib_handler</B> * handler, <B>netsnmp_handler_registration</B> * reginfo, netsnmp_agent_request_info * reqinfo, netsnmp_request_info * requests)</A><DD>
<DT><A HREF="#lbAG">netsnmp_cache* netsnmp_extract_cache_info (netsnmp_agent_request_info * reqinfo)</A><DD>
<DT><A HREF="#lbAH"><B>netsnmp_mib_handler</B>* netsnmp_get_cache_handler (int timeout, NetsnmpCacheLoad * load_hook, NetsnmpCacheFree * free_hook, oid * rootoid, int rootoid_len)</A><DD>
<DT><A HREF="#lbAI">int netsnmp_is_cache_valid (netsnmp_agent_request_info * reqinfo)</A><DD>
<DT><A HREF="#lbAJ">int netsnmp_register_cache_handler (<B>netsnmp_handler_registration</B> * reginfo, int timeout, NetsnmpCacheLoad * load_hook, NetsnmpCacheFree * free_hook)</A><DD>
<DT><A HREF="#lbAK">void release_cached_resources (unsigned int regNo, void * clientargs)</A><DD>
</DL>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 21:37:33 GMT, March 22, 2004
</BODY>
</HTML>
<!-- CONTENT END -->